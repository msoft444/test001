# 基本設計書

## 1. アーキテクチャ方針
- **構成**: クライアントサイドレンダリング（CSR）を採用。計算ロジックは全てJavaScriptで実装する。
- **配信**: Pythonの標準ライブラリ `http.server` を使用して静的ファイル（HTML, CSS, JS）を配信するWebサーバーコンテナとする。
- **コンテナ**: `python:3.11-slim` をベースイメージとし、軽量なコンテナを構築する。

## 2. 変更対象モジュール
- `src/static/index.html`: アプリケーションのUI構造（入力フォーム、結果表示エリア）。
- `src/static/style.css`: 配色、レイアウト、ダークモード用のCSS変数定義。
- `src/static/script.js`: 日付計算ロジック、イベントリスナー、ダークモード制御。
- `Dockerfile`: Webサーバー起動設定を含むコンテナ定義。
- `entrypoint.sh` (任意): コンテナ起動時の実行スクリプト。

## 3. データフロー/状態遷移
1. **初期表示**: ユーザーがアクセス -> サーバーがindex.html等を返却。
2. **入力・計算**: ユーザーが日付/数値を入力 -> JavaScriptが`change`または`input`イベントを検知 -> 即座に計算実行 -> DOM更新。
3. **モード切替**: トグルスイッチ押下 -> `body`タグに`dark-mode`クラスを付与/削除 -> CSS変数によるスタイル変更。

## 4. エラーハンドリング方針
- **入力バリデーション**: 日付未入力や不正な形式の場合、計算結果欄に「無効な日付です」等のメッセージを表示する。
- **数値入力**: 日数入力欄は数値のみ受け付けるようHTML属性(`type="number"`)で制限する。

## 5. テスト戦略（概要）
- **単体テスト**: 主要な計算ロジック（差分計算、加減算）はJavaScript関数として実装し、ブラウザコンソール等で簡易確認を行う。
- **結合テスト**: コンテナを起動し、ブラウザからアクセスしてUI操作による動作確認を行う（E2E的な確認）。